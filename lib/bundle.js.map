{"version":3,"sources":["webpack:///webpack/bootstrap 3406c0e6b587c03b2a49","webpack:///./lib/asteroids.js","webpack:///./lib/game.js","webpack:///./lib/asteroid.js","webpack:///./lib/util.js","webpack:///./lib/movingObject.js","webpack:///./lib/gameView.js","webpack:///./lib/bullet.js","webpack:///./lib/ship.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;AClDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,kBAAiB,wBAAwB;AACzC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA,wBAAuB,uCAAuC;AAC9D;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kBAAiB,uBAAuB;AACxC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,uBAAuB;AACxC;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,uBAAuB;AACxC,oBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,yCAAwC,aAAa;AACrD,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;;;;;;ACpIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC7CA;;AAEA;AACA,iCAAgC,+BAA+B;AAC/D;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACvCA;AACA,6BAA4B;AAC5B,6BAA4B;AAC5B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACnEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAM;;;AAGN;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAwB,2CAA2C,EAAE;AACrE,yBAAwB,2CAA2C,EAAE;AACrE,yBAAwB,iCAAiC,EAAE;AAC3D,yBAAwB,iCAAiC,EAAE;AAC3D;AACA;AACA,4BAA2B,kBAAkB,EAAE;AAC/C,OAAM;;AAEN,4BAA2B,oBAAoB;;AAE/C;;AAEA;;;;;;;ACtDA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3406c0e6b587c03b2a49\n **/","var Game = require(\"./game\");\nvar GameView = require(\"./gameView\");\n\nvar Asteroids = {\n  startGame: function() {\n    var bgCanvas = document.getElementById('background');\n    bgCanvas.width = Game.DIM_X;\n    bgCanvas.height = Game.DIM_Y;\n    var bgContext = bgCanvas.getContext('2d');\n    bgContext.drawImage(ImageRepository.background, 0, 0);\n\n    var gameCanvas = document.getElementById(\"game-canvas\");\n    gameCanvas.width = Game.DIM_X;\n    gameCanvas.height = Game.DIM_Y;\n    var mainCtx = gameCanvas.getContext(\"2d\");\n\n    var shipCanvas = document.getElementById(\"ship-canvas\");\n    shipCanvas.width = Game.DIM_X;\n    shipCanvas.height = Game.DIM_Y;\n    var shipCtx = shipCanvas.getContext(\"2d\");\n\n    var game = new Game();\n\n    //new GameView(game, mainCtx, shipCtx).start();\n  }\n};\n\nvar ImageRepository = new function() {\n\t// Define images\n\tthis.background = new Image();\n\n\t// Ensure all images have loaded before starting the game\n\tvar numImages = 1;\n\tvar numLoaded = 0;\n\n\tfunction imageLoaded() {\n\t\tnumLoaded++;\n\t\tif (numLoaded === numImages) {\n\t\t\tAsteroids.startGame();\n\t\t}\n\t}\n\n\tvar self = this;\n\tthis.background.onload = function() {\n\t\timageLoaded();\n\t};\n\n\t// Set images src\n\tthis.background.src = \"./bg.png\";\n  //this.spaceship.src = \"./imgs/ship.png\";\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/asteroids.js\n ** module id = 0\n ** module chunks = 0\n **/","var Asteroid = require(\"./asteroid\");\nvar Bullet = require(\"./bullet\");\nvar Ship = require(\"./ship\");\n\nvar Game = function() {\n  this.num_asteroids = 3;\n  this.asteroids = [];\n  this.ship = new Ship(this.randomPosition(), this);\n  this.bullets = [];\n\n  this.addAsteroids();\n};\n\nGame.DIM_X = 600;\nGame.DIM_Y = 360;\n\nGame.prototype.addAsteroids = function() {\n\n  for (var i = 0; i < this.num_asteroids; i++) {\n    this.asteroids.push(this.randomAsteroid());\n  }\n};\n\nGame.prototype.allObjects = function() {\n  return [].concat(this.ship, this.asteroids, this.bullets);\n};\n\nGame.prototype.add = function(object) {\n\n  if (object.type === \"Asteroid\") {\n    this.asteroids.push(object);\n  } else if (object.type === \"Bullet\") {\n    this.bullets.push(object);\n  } else if (object.type === \"Ship\") {\n    this.ships.push(object);\n  }\n\n};\n\nGame.prototype.randomAsteroid = function() {\n  return new Asteroid({pos: this.randomPosition(), game: this});\n};\n\nGame.prototype.randomPosition = function() {\n\n  return [Math.random()*Game.DIM_X, Math.random()*Game.DIM_Y];\n};\n\nGame.prototype.draw = function(mainCtx, shipCtx) {\n  var allObjects = this.allObjects();\n\n  mainCtx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n  shipCtx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\n  for (var i = 0; i < allObjects.length; i++) {\n    if (allObjects[i].type === \"Ship\") {\n      allObjects[i].draw(shipCtx);\n    } else {\n      allObjects[i].draw(mainCtx);\n    }\n  }\n};\n\nGame.prototype.moveObjects = function(delta) {\n  var allObjects = this.allObjects();\n\n  for (var i = 0; i < allObjects.length; i++) {\n    allObjects[i].move(delta);\n  }\n};\n\nGame.prototype.checkCollisions = function() {\n  var allObjects = this.allObjects();\n\n  for (var i = 0; i < allObjects.length; i++) {\n    for (var j = 0; j < allObjects.length; j++) {\n      if (allObjects[i] == allObjects[j]) {\n        continue;\n      }\n      if (allObjects[i].isCollidedWith(allObjects[j])) {\n        allObjects[i].collideWith(allObjects[j]);\n      }\n    }\n  }\n};\n\nGame.prototype.step = function(delta) {\n  this.ship.slowDownShip();\n  this.moveObjects(delta);\n  this.checkCollisions();\n};\n\nGame.prototype.remove = function(object) {\n\n  if (object.type === \"Asteroid\") {\n    var idx = this.asteroids.indexOf(object);\n    this.asteroids[idx] = new Asteroid({ game: this });\n  } else if (object.type === \"Bullet\") {\n      this.bullets.splice(this.bullets.indexOf(object), 1);\n  } else if (object.type === \"Ship\") {\n      this.ships.splice(this.ships.indexOf(object), 1);\n  }\n};\n\nGame.prototype.wrap = function(pos) {\n  var newPos = pos.slice();\n\n  if (pos[0] > Game.DIM_X) {\n    newPos[0] = 0;\n  } else if (pos[0] < 0) {\n    newPos[0] = Game.DIM_X;\n  }\n\n  if (pos[1] > Game.DIM_Y) {\n    newPos[1] = 0;\n  } else if (pos[1] < 0) {\n    newPos[1] = Game.DIM_Y;\n  }\n\n  return newPos;\n\n};\n\nGame.prototype.isOutOfBounds = function(pos) {\n\n  if (pos[0] > Game.DIM_X || pos[0] < 0 || pos[1] > Game.DIM_Y || pos[1] < 0) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game.js\n ** module id = 1\n ** module chunks = 0\n **/","var Util = require(\"./util\");\nvar MovingObject = require(\"./movingObject\");\nvar Ship = require(\"./ship\");\n\nvar DEFAULTS = {\n\tCOLOR: \"#505050\",\n\tRADIUS: 25,\n\tSPEED: 1\n};\n\nvar Asteroid = function(options) {\n  options.color = DEFAULTS.COLOR;\n  options.pos = options.pos || options.game.randomPosition();\n  options.radius = DEFAULTS.RADIUS;\n  options.vel = options.vel || Util.randomVec(DEFAULTS.SPEED);\n\n  MovingObject.call(this, options);\n};\n\nUtil.inherits(Asteroid, MovingObject);\n\nAsteroid.prototype.collideWith = function(otherObject) {\n\tdebugger;\n  if (otherObject.type === \"Ship\") {\n    otherObject.relocate();\n  }\n};\n\n\n\n// Overrides moving object's draw method\nAsteroid.prototype.draw = function(ctx) {\n  ctx.beginPath();\n  ctx.moveTo(this.pos[0],this.pos[1]);\n  ctx.bezierCurveTo(this.pos[0], this.pos[1] - 50, this.pos[0]\n    + 50, this.pos[1] - 50, this.pos[0] + 50, this.pos[1]);\n  ctx.bezierCurveTo(this.pos[0] + 50, this.pos[1] + 25, this.pos[0],\n    this.pos[1] + 25, this.pos[0], this.pos[1]);\n  ctx.stroke();\n  ctx.fillStyle = \"red\";\n  ctx.fill();\n};\n\nAsteroid.prototype.type = \"Asteroid\";\n\nmodule.exports = Asteroid;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/asteroid.js\n ** module id = 2\n ** module chunks = 0\n **/","var Util = {\n\n  inherits: function (ChildClass, BaseClass) {\n    var Surrogate = function() { this.constructor = ChildClass; };\n    Surrogate.prototype = BaseClass.prototype;\n    ChildClass.prototype = new Surrogate();\n  },\n\n  // Return a randomly oriented vector with the given length.\n  randomVec: function(length) {\n    var deg = 2 * Math.PI * Math.random();\n\n    var rv = Util.scale([Math.sin(deg), Math.cos(deg)], length);\n    return rv;\n  },\n\n  // Scale the length of a vector by the given amount.\n  scale: function (vec, m) {\n    return [vec[0] * m, vec[1] * m];\n  },\n\n// Normalize the length of the vector to 1, maintaining direction.\n  dir: function (vec) {\n    var norm = Util.norm(vec);\n    return Util.scale(vec, 1 / norm);\n  },\n\n// Find distance between two points.\n  dist: function (pos1, pos2) {\n    return Math.sqrt(\n      Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2)\n    );\n  },\n\n// Find the length of the vector.\n  norm: function (vec) {\n    return Util.dist([0, 0], vec);\n  }\n};\n\nmodule.exports = Util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/util.js\n ** module id = 3\n ** module chunks = 0\n **/","\nvar MovingObject = function (options, game) {\n  this.pos = options[\"pos\"];  // two element array\n  this.vel = options[\"vel\"];  // two element array\n  this.radius = options[\"radius\"];\n  this.color = options[\"color\"];\n  this.game = options[\"game\"];\n};\n\nMovingObject.prototype.isWrappable = true;\n\nMovingObject.prototype.draw = function(mainCtx) {\n  mainCtx.fillStyle = this.color;\n  mainCtx.beginPath();\n\n  mainCtx.arc(\n    this.pos[0],\n    this.pos[1],\n    this.radius,\n    0,\n    2 * Math.PI,\n    false\n  );\n\n  mainCtx.fill();\n};\n\nvar NORMAL_FRAME_TIME_DELTA = 1000/60;\nMovingObject.prototype.move = function(timeDelta) {\n  //timeDelta is number of milliseconds since last move\n  //if the computer is busy the time delta will be larger\n  //in this case the MovingObject should move farther in this frame\n  //velocity of object is how far it should move in 1/60th of a second\n  var velocityScale = timeDelta / NORMAL_FRAME_TIME_DELTA;\n  var offsetX = this.vel[0] * velocityScale;\n  var offsetY = this.vel[1] * velocityScale;\n\n  this.pos = [this.pos[0] + offsetX, this.pos[1] + offsetY];\n\n  if (this.isWrappable === true) {\n    this.pos = this.game.wrap(this.pos);\n  } else {\n    if (this.game.isOutOfBounds(this.pos) === true) {\n      this.game.remove(this);\n    }\n  }\n};\n\n// Find distance to other object (Pythagoras)\nMovingObject.prototype.distance = function(otherObject) {\n  return Math.sqrt(\n    Math.pow(this.pos[0] - otherObject.pos[0], 2)\n    + Math.pow(this.pos[1] - otherObject.pos[1], 2));\n};\n\nMovingObject.prototype.isCollidedWith = function(otherObject) {\n  if (this.distance(otherObject) <= (this.radius + otherObject.radius)) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nMovingObject.prototype.collideWith = function(otherObject) {\n  debugger;\n};\n\nmodule.exports = MovingObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/movingObject.js\n ** module id = 4\n ** module chunks = 0\n **/","var GameView = function(game, mainCtx, shipCtx) {\n  this.game = game;\n  this.mainCtx = mainCtx;\n  this.shipCtx = shipCtx;\n};\n\nGameView.prototype.start = function() {\n  this.bindKeyHandlers();\n  this.lastTime = 0;\n\n  requestAnimationFrame(this.animate.bind(this));\n\n  // setInterval(function() {\n  //   self.game.step();\n  //   self.game.draw(self.ctx);\n  // }, 20);\n\n\n};\n\nGameView.prototype.animate = function(time){\n  var timeDelta = time - this.lastTime;\n\n  this.game.step(timeDelta);\n  this.game.draw(this.mainCtx, this.shipCtx);\n  this.lastTime = time;\n\n  //every call to animate requests causes another call to animate\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.MOVES = {\n  \"w\": +1,\n  \"a\": Math.PI/15,\n  \"x\": -1,\n  \"d\": -Math.PI/15,\n};\n\nGameView.prototype.bindKeyHandlers = function() {\n  var ship = this.game.ship;\n\n  key('a', function () { ship.changeDirection(GameView.MOVES['a']); });\n  key('d', function () { ship.changeDirection(GameView.MOVES['d']); });\n  key('w', function () { ship.power(GameView.MOVES['w']); });\n  key('x', function () { ship.power(GameView.MOVES['x']); });\n  // Object.keys(GameView.MOVES).forEach(function (k) {\n  //   var move = GameView.MOVES[k];\n  //   key(k, function () { ship.power(move); });\n  // });\n\n  key(\"space\", function() { ship.fireBullet() } );\n\n};\n\nmodule.exports = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/gameView.js\n ** module id = 5\n ** module chunks = 0\n **/","var Util = require(\"./util\");\nvar MovingObject = require(\"./movingObject\");\nvar Asteroid = require(\"./asteroid\");\n\nvar Bullet = function(options) {\n  options.radius = Bullet.RADIUS;\n  MovingObject.call(this, options);\n};\n\nBullet.RADIUS = 3;\nBullet.SPEED = 15;\n\nUtil.inherits(Bullet, MovingObject);\n\nBullet.prototype.isWrappable = false;\nBullet.prototype.type = \"Bullet\";\n\nBullet.prototype.collideWith = function(otherObject) {\n  if (otherObject.type === \"Asteroid\") {\n    this.game.remove(this);\n    this.game.remove(otherObject);\n  }\n};\n\nmodule.exports = Bullet;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/bullet.js\n ** module id = 6\n ** module chunks = 0\n **/","var MovingObject = require(\"./movingObject\");\nvar Util = require(\"./util\");\nvar Bullet = require(\"./bullet\");\n\nvar Ship = function(pos, game) {\n  this.direction = Math.PI / 2;\n  var options = {\n    color: \"blue\",\n    radius: 5,\n    pos: pos,\n    vel: [0, 0],\n    game: game\n  };\n  MovingObject.call(this, options);\n};\n\nUtil.inherits(Ship, MovingObject);\n\nShip.prototype.type = \"Ship\";\n\nShip.prototype.relocate = function() {\n  this.pos = this.game.randomPosition();\n  this.vel = [0, 0];\n};\n\nShip.prototype.power = function(impulse) {\n  this.vel[0] += impulse*Math.cos(this.direction);\n  this.vel[1] += -impulse*Math.sin(this.direction);\n};\n\nShip.prototype.changeDirection = function(radians) {\n  this.direction += radians;\n};\n\nShip.prototype.slowDownShip = function() {\n  this.vel = Util.scale(this.vel, 0.99);\n};\n\nShip.prototype.draw = function(shipCtx) {\n  shipCtx.beginPath();\n\n  shipCtx.moveTo(this.pos[0] + 10*Math.cos(this.direction),\n    this.pos[1] - 10*Math.sin(this.direction));\n  shipCtx.lineTo(this.pos[0] + 10*Math.cos(this.direction\n    + Math.PI - Math.PI/8), this.pos[1] - 10*Math.sin(this.direction\n      + Math.PI - Math.PI/8));\n  shipCtx.lineTo(this.pos[0] + 10*Math.cos(this.direction + Math.PI\n    + Math.PI/8), this.pos[1] - 10*Math.sin(this.direction + Math.PI\n      + Math.PI/8));\n  shipCtx.closePath();\n  shipCtx.strokeStyle=\"red\";\n  shipCtx.stroke();\n  //shipCtx.drawImage(imageRepository.spaceship, this.pos[0], this.pos[1]);\n};\n\nShip.prototype.fireBullet = function() {\n  var norm = Util.norm(this.vel);\n\n  // do nothing if velocity vector has norm 0\n  if (norm === 0) {\n    return;\n  }\n\n  // relative velocity vector of the bullet is the normalized velocity vector\n  // times the Bullet.SPEED constant\n  var relVel = Util.scale(\n    Util.dir(this.vel),\n    Bullet.SPEED\n  );\n\n  // bullet velocity adds the ship's velocity to the bullet's default speed\n  var bulletVel = [\n    relVel[0] + this.vel[0], relVel[1] + this.vel[1]\n  ];\n\n  var options = {\n    pos: this.pos,\n    vel: bulletVel,\n    color: \"red\",\n    game: this.game\n  };\n  var bullet = new Bullet(options);\n\n  this.game.add(bullet);\n};\n\nmodule.exports = Ship;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/ship.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}