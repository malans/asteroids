{"version":3,"sources":["webpack:///webpack/bootstrap 5e8de5866c236ded23e9","webpack:///./lib/entry.js","webpack:///./lib/asteroids.js","webpack:///./lib/game.js","webpack:///./lib/asteroid.js","webpack:///./lib/util.js","webpack:///./lib/movingObject.js","webpack:///./lib/ship.js","webpack:///./lib/bullet.js","webpack:///./lib/sprite.js","webpack:///./lib/newSprites.js","webpack:///./lib/assetRepository.js","webpack:///./lib/assetPaths.js","webpack:///./lib/gameView.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACVA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAiB,wBAAwB;AACzC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAiB,uBAAuB;AACxC;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,uBAAuB;AACxC;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,uBAAuB;AACxC,oBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;;;;;;ACrKA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACtCA;;AAEA;AACA,iCAAgC,+BAA+B;AAC/D;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACvCA;AACA,6BAA4B;AAC5B,6BAA4B;AAC5B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;ACpEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AClFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC9BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;AClEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB,IAAG;;AAEH;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAiB,+BAA+B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4BAA2B,8CAA8C,EAAE;AAC3E,6BAA4B,+CAA+C,EAAE;AAC7E,0BAAyB,kCAAkC,EAAE;AAC7D,4BAA2B,oCAAoC,EAAE;AACjE;AACA;AACA,4BAA2B,kBAAkB,EAAE;AAC/C,OAAM;;AAEN,4BAA2B,oBAAoB;;AAE/C;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5e8de5866c236ded23e9\n **/","var Asteroids = require('./asteroids');\nvar AssetRepository = require('./assetRepository');\nvar AssetPaths = require('./assetPaths');\n\nfor (var path in AssetPaths) {\n    if (AssetPaths.hasOwnProperty(path)) {\n       AssetRepository.queueDownload(AssetPaths[path]);\n    }\n}\n\nAssetRepository.downloadAll(Asteroids.gameIntro.bind(Asteroids));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/entry.js\n ** module id = 0\n ** module chunks = 0\n **/","var Game = require(\"./game\");\nvar GameView = require(\"./gameView\");\nvar AssetRepository = require(\"./assetRepository\");\nvar AssetPaths = require('./assetPaths');\n\nvar Asteroids = {\n\n  gameIntro: function() {\n    var bgCanvas = document.getElementById('background');\n    bgCanvas.width = Game.DIM_X;\n    bgCanvas.height = Game.DIM_Y;\n    var bgCtx = bgCanvas.getContext('2d');\n\n    //draw the background\n    bgCtx.drawImage(AssetRepository.getAsset(AssetPaths.background), 0, 0, Game.DIM_X, Game.DIM_Y);\n\n    //draw the logo\n    var asteroidsLogo = AssetRepository.getAsset(AssetPaths.asteroidsLogo);\n    bgCtx.drawImage(asteroidsLogo, bgCanvas.width/2 -  asteroidsLogo.width/2, 50 );\n\n    //draw the button\n    var playGameButton = AssetRepository.getAsset(AssetPaths.playGameButton);\n    bgCtx.drawImage(playGameButton, 50, Game.DIM_Y - 50 - playGameButton.height);\n    // bgCtx.font = \"48px serif\";\n    // bgCtx.strokeStyle = \"white\";\n    // bgCtx.strokeText(\" Play Game\", 50, 550);\n\n    function windowToCanvas(canvas, x, y) {\n       var rect = canvas.getBoundingClientRect();\n\n       return { x: x - rect.left,\n                y: y - rect.top\n              };\n    }\n\n    bgCanvas.onmousedown = function (e) {\n       var loc = windowToCanvas(bgCanvas, e.clientX, e.clientY);\n       if ((loc.x > 50) && (loc.x < playGameButton.width + 50)\n          && (loc.y > Game.DIM_Y - 50 - playGameButton.height)\n          && (loc.y < Game.DIM_Y - 50)) {\n            this.startGame();\n          }\n    }.bind(this);\n  },\n\n  startGame: function() {\n    // draw the background\n    var bgCanvas = document.getElementById('background');\n    bgCanvas.width = Game.DIM_X;\n    bgCanvas.height = Game.DIM_Y;\n    var bgCtx = bgCanvas.getContext('2d');\n    bgCtx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n    bgCtx.drawImage(AssetRepository.getAsset(AssetPaths.background), 0, 0, Game.DIM_X, Game.DIM_Y);\n\n    // canvas for objects other than ship\n    var gameCanvas = document.getElementById(\"game-canvas\");\n    gameCanvas.width = Game.DIM_X;\n    gameCanvas.height = Game.DIM_Y;\n    var mainCtx = gameCanvas.getContext(\"2d\");\n\n    // canvas for the ship\n    var shipCanvas = document.getElementById(\"ship-canvas\");\n    shipCanvas.width = Game.DIM_X;\n    shipCanvas.height = Game.DIM_Y;\n    var shipCtx = shipCanvas.getContext(\"2d\");\n\n    //draw the score count\n    shipCtx.font = \"48px sans-serif\";\n    shipCtx.strokeStyle = \"white\";\n    shipCtx.strokeText(\"0\", 50, 550);\n\n    var game = new Game();\n\n    new GameView(game, bgCtx, mainCtx, shipCtx).start();\n  }\n};\n\nmodule.exports = Asteroids;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/asteroids.js\n ** module id = 1\n ** module chunks = 0\n **/","var Asteroid = require(\"./asteroid\");\nvar Bullet = require(\"./bullet\");\nvar Ship = require(\"./ship\");\nvar Sprite = require(\"./sprite\");\nvar AssetRepository = require(\"./assetRepository\");\nvar AssetPaths = require(\"./assetPaths\");\nvar NewSprites = require(\"./newSprites\");\n\nvar Game = function() {\n  this.num_asteroids = 10;\n  this.asteroids = [];\n  this.ship = new Ship(this.randomPosition(), this);\n  this.bullets = [];\n  this.sprites = [];\n  this.score = 0;\n  this.addAsteroids();\n};\n\nGame.DIM_X = 1000;\nGame.DIM_Y = 600;\n\nGame.prototype.addAsteroids = function() {\n  for (var i = 0; i < this.num_asteroids; i++) {\n    this.asteroids.push(this.randomAsteroid());\n  }\n};\n\nGame.prototype.allObjects = function() {\n  return [].concat(this.ship, this.asteroids, this.bullets, this.sprites);\n};\n\nGame.prototype.add = function(object) {\n\n  if (object.type === \"Asteroid\") {\n    this.asteroids.push(object);\n  } else if (object.type === \"Bullet\") {\n    this.bullets.push(object);\n  } else if (object.type === \"Ship\") {\n    this.ships.push(object);\n  } else if (object.type === \"Sprite\") {\n    this.sprites.push(object);\n  }\n\n};\n\nGame.prototype.randomAsteroid = function() {\n  debugger;\n  return (NewSprites.newAsteroid(this.randomPosition(), this));\n//   return new Asteroid({pos: this.randomPosition(),\n//     game: this,\n//     spritePos: [0,0],\n//     image: AssetRepository.getAsset(AssetPaths.asteroidSprite),\n//     width: 128,\n//     height: 128,\n//     speed: 10,\n//     scale: Math.random(),\n//     frames: [[0,0], [0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [0,7],\n//              [1,0], [1,1], [1,2], [1,3], [1,4], [1,5], [1,6], [1,7],\n//              [2,0], [2,1], [2,2], [2,3], [2,4], [2,5], [2,6], [2,7],\n//              [3,0], [3,1], [3,2], [3,3], [3,4], [3,5], [3,6], [3,7]],\n//     once: false});\n// };\n};\n\nGame.prototype.randomPosition = function() {\n\n  return [Math.random()*Game.DIM_X, Math.random()*Game.DIM_Y];\n};\n\nGame.prototype.draw = function(bgCtx, mainCtx, shipCtx, timeDelta) {\n  var allObjects = this.allObjects();\n\n  mainCtx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n  shipCtx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\n  shipCtx.font = \"48px sans-serif\";\n  shipCtx.fillStyle = \"white\";\n  shipCtx.fillText(this.score, 50, 550);\n\n  for (var i = 0; i < allObjects.length; i++) {\n    if (allObjects[i].type === \"Ship\") {\n      allObjects[i].draw(shipCtx);\n    } else if (allObjects[i].type === \"Sprite\") {\n      allObjects[i].draw(mainCtx, timeDelta);\n    } else {\n      allObjects[i].draw(mainCtx, timeDelta);\n    }\n  }\n};\n\nGame.prototype.moveObjects = function(delta) {\n  var allObjects = this.allObjects();\n\n  for (var i = 0; i < allObjects.length; i++) {\n    allObjects[i].move(delta);\n  }\n};\n\nGame.prototype.checkCollisions = function() {\n  var allObjects = this.allObjects();\n\n  for (var i = 0; i < allObjects.length; i++) {\n    for (var j = 0; j < allObjects.length; j++) {\n      if (allObjects[i] == allObjects[j]) {\n        continue;\n      }\n      if (allObjects[i].isCollidedWith(allObjects[j])) {\n        allObjects[i].collideWith(allObjects[j]);\n      }\n    }\n  }\n};\n\nGame.prototype.increaseScore = function() {\n  this.score += 10;\n};\n\nGame.prototype.step = function(delta) {\n  this.ship.slowDownShip();\n  this.moveObjects(delta);\n  this.checkCollisions();\n};\n\nGame.prototype.remove = function(object) {\n\n  if (object.type === \"Asteroid\") {\n    var idx = this.asteroids.indexOf(object);\n    this.asteroids[idx] = this.randomAsteroid();\n  } else if (object.type === \"Bullet\") {\n      this.bullets.splice(this.bullets.indexOf(object), 1);\n  } else if (object.type === \"Ship\") {\n      this.ships.splice(this.ships.indexOf(object), 1);\n  } else if (object.type === \"Sprite\") {\n     this.sprites.splice(this.sprites.indexOf(object), 1);\n  }\n};\n\nGame.prototype.wrap = function(pos) {\n  var newPos = pos.slice();\n\n  if (pos[0] > Game.DIM_X) {\n    newPos[0] = 0;\n  } else if (pos[0] < 0) {\n    newPos[0] = Game.DIM_X;\n  }\n\n  if (pos[1] > Game.DIM_Y) {\n    newPos[1] = 0;\n  } else if (pos[1] < 0) {\n    newPos[1] = Game.DIM_Y;\n  }\n\n  return newPos;\n\n};\n\nGame.prototype.isOutOfBounds = function(pos) {\n\n  if (pos[0] > Game.DIM_X || pos[0] < 0 || pos[1] > Game.DIM_Y || pos[1] < 0) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game.js\n ** module id = 2\n ** module chunks = 0\n **/","var Util = require(\"./util\");\nvar MovingObject = require(\"./movingObject\");\nvar Ship = require(\"./ship\");\nvar Sprite = require(\"./sprite\");\n\nvar DEFAULTS = {\n\tCOLOR: \"#505050\",\n\tRADIUS: 50,\n\tSPEED: 2\n};\n\nfunction Asteroid (options) {\n  // options.color = DEFAULTS.COLOR;\n  options.pos = options.pos || options.game.randomPosition();\n  options.radius = DEFAULTS.RADIUS;\n  options.vel = options.vel || Util.randomVec(DEFAULTS.SPEED);\n\n  Sprite.call(this, options);\n\n}\n\nUtil.inherits(Asteroid, Sprite);\n\nAsteroid.prototype.collideWith = function(otherObject) {\n  if (otherObject.type === \"Ship\") {\n    otherObject.relocate();\n  }\n};\n\n// Asteroid.prototype.draw = function(ctx, timeDelta) {\n// \tctx.save();\n// \tctx.rotate((Math.PI/180)*25);\n// \tObject.getPrototypeOf(Sprite).draw(ctx, timeDelta);\n// \tctx.restore();\n// };\n\nAsteroid.prototype.type = \"Asteroid\";\n\nmodule.exports = Asteroid;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/asteroid.js\n ** module id = 3\n ** module chunks = 0\n **/","var Util = {\n\n  inherits: function (ChildClass, BaseClass) {\n    var Surrogate = function() { this.constructor = ChildClass; };\n    Surrogate.prototype = BaseClass.prototype;\n    ChildClass.prototype = new Surrogate();\n  },\n\n  // Return a randomly oriented vector with the given length.\n  randomVec: function(length) {\n    var deg = 2 * Math.PI * Math.random();\n\n    var rv = Util.scale([Math.sin(deg), Math.cos(deg)], length);\n    return rv;\n  },\n\n  // Scale the length of a vector by the given amount.\n  scale: function (vec, m) {\n    return [vec[0] * m, vec[1] * m];\n  },\n\n// Normalize the length of the vector to 1, maintaining direction.\n  dir: function (vec) {\n    var norm = Util.norm(vec);\n    return Util.scale(vec, 1 / norm);\n  },\n\n// Find distance between two points.\n  dist: function (pos1, pos2) {\n    return Math.sqrt(\n      Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2)\n    );\n  },\n\n// Find the length of the vector.\n  norm: function (vec) {\n    return Util.dist([0, 0], vec);\n  }\n};\n\nmodule.exports = Util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/util.js\n ** module id = 4\n ** module chunks = 0\n **/","\nvar MovingObject = function (options, game) {\n  this.pos = options[\"pos\"];  // two element array\n  this.vel = options[\"vel\"];  // two element array\n  this.radius = options[\"radius\"];\n  this.color = options[\"color\"];\n  this.game = options[\"game\"];\n};\n\nMovingObject.prototype.isWrappable = true;\n\nMovingObject.prototype.draw = function(mainCtx) {\n  mainCtx.fillStyle = this.color;\n  mainCtx.beginPath();\n\n  mainCtx.arc(\n    this.pos[0],\n    this.pos[1],\n    this.radius,\n    0,\n    2 * Math.PI,\n    false\n  );\n\n  mainCtx.fill();\n};\n\nvar NORMAL_FRAME_TIME_DELTA = 1000/60;\nMovingObject.prototype.move = function(timeDelta) {\n  //timeDelta is number of milliseconds since last move\n  //if the computer is busy the time delta will be larger\n  //in this case the MovingObject should move farther in this frame\n  //velocity of object is how far it should move in 1/60th of a second\n  var velocityScale = timeDelta / NORMAL_FRAME_TIME_DELTA;\n  var offsetX = this.vel[0] * velocityScale;\n  var offsetY = this.vel[1] * velocityScale;\n\n  this.pos = [this.pos[0] + offsetX, this.pos[1] + offsetY];\n\n  if (this.isWrappable === true) {\n    this.pos = this.game.wrap(this.pos);\n  } else {\n    if (this.game.isOutOfBounds(this.pos) === true) {\n      this.game.remove(this);\n    }\n  }\n};\n\n// Find distance to other object (Pythagoras)\nMovingObject.prototype.distance = function(otherObject) {\n  return Math.sqrt(\n    Math.pow((this.pos[0] + this.radius) - (otherObject.pos[0] + otherObject.radius), 2)\n    + Math.pow((this.pos[1]+ this.radius) - (otherObject.pos[1] + otherObject.radius), 2));\n};\n\nMovingObject.prototype.isCollidedWith = function(otherObject) {\n  if (otherObject.type === \"Asteroid\")\n  if (this.distance(otherObject) <= (this.radius + otherObject.radius)) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nMovingObject.prototype.collideWith = function(otherObject) {\n\n};\n\nmodule.exports = MovingObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/movingObject.js\n ** module id = 5\n ** module chunks = 0\n **/","var MovingObject = require(\"./movingObject\");\nvar Util = require(\"./util\");\nvar Bullet = require(\"./bullet\");\n\nvar Ship = function(pos, game) {\n  this.direction = Math.PI / 2;\n  var options = {\n    color: \"blue\",\n    radius: 5,\n    pos: pos,\n    vel: [0, 0],\n    game: game\n  };\n  MovingObject.call(this, options);\n};\n\nUtil.inherits(Ship, MovingObject);\n\nShip.prototype.type = \"Ship\";\n\nShip.prototype.relocate = function() {\n  this.pos = this.game.randomPosition();\n  this.vel = [0, 0];\n};\n\nShip.prototype.power = function(impulse) {\n  this.vel[0] += impulse*Math.cos(this.direction);\n  this.vel[1] += -impulse*Math.sin(this.direction);\n};\n\nShip.prototype.changeDirection = function(radians) {\n  this.direction += radians;\n};\n\nShip.prototype.slowDownShip = function() {\n  this.vel = Util.scale(this.vel, 0.99);\n};\n\nShip.prototype.draw = function(shipCtx) {\n  shipCtx.beginPath();\n\n  shipCtx.moveTo(this.pos[0] + 10*Math.cos(this.direction),\n    this.pos[1] - 10*Math.sin(this.direction));\n  shipCtx.lineTo(this.pos[0] + 10*Math.cos(this.direction\n    + Math.PI - Math.PI/8), this.pos[1] - 10*Math.sin(this.direction\n      + Math.PI - Math.PI/8));\n  shipCtx.lineTo(this.pos[0] + 10*Math.cos(this.direction + Math.PI\n    + Math.PI/8), this.pos[1] - 10*Math.sin(this.direction + Math.PI\n      + Math.PI/8));\n  shipCtx.closePath();\n  shipCtx.strokeStyle=\"red\";\n  shipCtx.stroke();\n  //shipCtx.drawImage(imageRepository.spaceship, this.pos[0], this.pos[1]);\n};\n\nShip.prototype.fireBullet = function() {\n\n  var direction_vector = [Math.cos(this.direction), -Math.sin(this.direction)];\n\n  // relative velocity vector of the bullet is the normalized velocity vector\n  // times the Bullet.SPEED constant\n  var relVel = Util.scale(\n    Util.dir(direction_vector),\n    Bullet.SPEED\n  );\n\n  // bullet velocity adds the ship's velocity to the bullet's default speed\n  var bulletVel = [\n    relVel[0] + this.vel[0], relVel[1] + this.vel[1]\n  ];\n\n  var options = {\n    pos: this.pos,\n    vel: bulletVel,\n    color: \"red\",\n    game: this.game\n  };\n  var bullet = new Bullet(options);\n\n  this.game.add(bullet);\n};\n\nmodule.exports = Ship;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/ship.js\n ** module id = 6\n ** module chunks = 0\n **/","var Util = require(\"./util\");\nvar MovingObject = require(\"./movingObject\");\nvar Asteroid = require(\"./asteroid\");\nvar Sprite = require(\"./sprite\");\nvar NewSprites = require(\"./newSprites\");\n\nvar Bullet = function(options) {\n  options.radius = Bullet.RADIUS;\n  MovingObject.call(this, options);\n};\n\nBullet.RADIUS = 3;\nBullet.SPEED = 15;\n\nUtil.inherits(Bullet, MovingObject);\n\nBullet.prototype.isWrappable = false;\nBullet.prototype.type = \"Bullet\";\n\nBullet.prototype.collideWith = function(otherObject) {\n  if (otherObject.type === \"Asteroid\") {\n    this.game.remove(this);\n    this.game.remove(otherObject);\n    var explosion = NewSprites.newExplosion(otherObject.pos, this.game);\n    this.game.add(explosion);\n    this.game.increaseScore();\n  }\n\n};\n\nmodule.exports = Bullet;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/bullet.js\n ** module id = 7\n ** module chunks = 0\n **/","var MovingObject = require(\"./movingObject\");\nvar Util = require(\"./util\");\n\nfunction Sprite (options) {\n    this.canvasPos = options.canvasPos;\n    this.spritePos = options.spritePos;\n    this.image = options.image;\n    this.width = options.width;\n    this.height = options.height;\n    this.speed = typeof options.speed === 'number' ? options.speed : 0;\n    this.frames = options.frames;\n    this._index = 0;\n    this.scale = options.scale || 1;\n    this.once = options.once;\n    this.done = false;\n\n    MovingObject.call(this, options);\n}\n\nUtil.inherits(Sprite, MovingObject);\n\nSprite.prototype.update = function (timeDelta, canvasPos) {\n  if (this.done === true) {\n    this.game.remove(this);\n  }\n  this._index += this.speed*(timeDelta/1000);\n  this.canvasPos = canvasPos;\n};\n\nSprite.prototype.draw = function (ctx, timeDelta) {\n  this.update(timeDelta, this.pos);\n  if (this.done === true) {\n    return;\n  }\n\n  var frame;\n\n  if (this.speed > 0) {\n    var max = this.frames.length;\n    var idx = Math.floor(this._index);\n    frame = this.frames[idx % max];\n    if (this.once && idx >= max) {\n      this.done = true;\n      return;\n    }\n  } else {\n    frame = [0,0];\n  }\n\n  var x = this.spritePos[0];\n  var y = this.spritePos[1];\n\n  x += frame[1] * this.width;\n  y += frame[0] * this.height;\n\n  // Draw the animation\n  ctx.drawImage(this.image,\n               x, y,\n               this.width, this.height,\n               this.canvasPos[0], this.canvasPos[1],\n               this.width*this.scale, this.height*this.scale);\n\n};\n\nSprite.prototype.type = \"Sprite\";\n\nmodule.exports = Sprite;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/sprite.js\n ** module id = 8\n ** module chunks = 0\n **/","var Asteroid = require(\"./asteroid\");\nvar Sprite = require(\"./sprite\");\nvar AssetRepository = require(\"./assetRepository\");\nvar AssetPaths = require(\"./assetPaths\");\n\nvar NewSprites = {\n  newExplosion: function(pos, game) {\n    return new Sprite({\n        vel: [0,0],\n        radius: 0,\n        pos: pos,\n        game: game,\n        spritePos: [0,0],\n        image: AssetRepository.getAsset(AssetPaths.asteroidExplosion),\n        width: 64,\n        height: 64,\n        speed: 30,\n        frames: [[0,0], [0,1], [0,2], [0,3], [0,4],\n                 [1,0], [1,1], [1,2], [1,3], [1,4],\n                 [2,0], [2,1], [2,2], [2,3], [2,4],\n                 [3,0], [3,1], [3,2], [3,3], [3,4],\n                 [4,0], [4,1], [4,2], [4,3], [4,4]],\n        once: true});\n  },\n\n  newAsteroid: function(pos, game) {\n    return new Asteroid({pos: pos,\n      game: game,\n      spritePos: [0,0],\n      image: AssetRepository.getAsset(AssetPaths.asteroidSprite),\n      width: 128,\n      height: 128,\n      speed: 10,\n      scale: Math.random(),\n      frames: [[0,0], [0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [0,7],\n               [1,0], [1,1], [1,2], [1,3], [1,4], [1,5], [1,6], [1,7],\n               [2,0], [2,1], [2,2], [2,3], [2,4], [2,5], [2,6], [2,7],\n               [3,0], [3,1], [3,2], [3,3], [3,4], [3,5], [3,6], [3,7]],\n      once: false});\n  }\n};\n\nmodule.exports = NewSprites;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/newSprites.js\n ** module id = 9\n ** module chunks = 0\n **/","var AssetRepository = function() {\n  this.successCount = 0;\n  this.errorCount = 0;\n  this.cache = {};\n  this.downloadQueue = [];\n};\n\nAssetRepository.prototype.queueDownload = function(path) {\n  this.downloadQueue.push(path);\n};\n\nAssetRepository.prototype.downloadAll = function(downloadCallback) {\n  if (this.downloadQueue.length === 0) {\n    downloadCallback();\n  }\n\n  for (var i = 0; i < this.downloadQueue.length; i++) {\n      var path = this.downloadQueue[i];\n      var img = new Image();\n      var that = this;\n      img.addEventListener(\"load\", function() {\n          that.successCount += 1;\n          if (that.isDone()) {\n              downloadCallback();\n          }\n      }, false);\n      img.addEventListener(\"error\", function() {\n          that.errorCount += 1;\n          if (that.isDone()) {\n              downloadCallback();\n          }\n      }, false);\n      img.src = path;\n      this.cache[path] = img;\n  }\n};\n\nAssetRepository.prototype.isDone = function() {\n    return (this.downloadQueue.length === this.successCount + this.errorCount);\n};\n\nAssetRepository.prototype.getAsset = function(path) {\n    return this.cache[path];\n};\n\nmodule.exports = new AssetRepository;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/assetRepository.js\n ** module id = 10\n ** module chunks = 0\n **/","var AssetPaths = {\n  background: \"./imgs/bgg.jpg\",\n  asteroidsLogo: \"./imgs/asteroids_logo.png\",\n  playGameButton: \"./imgs/playGame.png\",\n  asteroidSprite: \"./imgs/asteroids.png\",\n  asteroid2Sprite: \"./imgs/asteroids2.png\",\n  asteroidExplosion: \"./imgs/asteroidExplosion.png\"\n};\n\nmodule.exports = AssetPaths;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/assetPaths.js\n ** module id = 11\n ** module chunks = 0\n **/","var GameView = function(game, bgCtx, mainCtx, shipCtx) {\n  this.game = game;\n  this.bgCtx = bgCtx;\n  this.mainCtx = mainCtx;\n  this.shipCtx = shipCtx;\n};\n\nGameView.prototype.start = function() {\n  this.bindKeyHandlers();\n  this.lastTime = 0;\n\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.animate = function(time) {\n  var timeDelta = time - this.lastTime;\n\n  this.game.step(timeDelta);\n  this.game.draw(this.bgCtx, this.mainCtx, this.shipCtx, timeDelta);\n  this.lastTime = time;\n\n  //every call to animate requests causes another call to animate\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.MOVES = {\n  \"up\": +1,\n  \"left\": Math.PI/15,\n  \"down\": -1,\n  \"right\": -Math.PI/15,\n};\n\nGameView.prototype.bindKeyHandlers = function() {\n  var ship = this.game.ship;\n\n  key('left', function () { ship.changeDirection(GameView.MOVES['left']); });\n  key('right', function () { ship.changeDirection(GameView.MOVES['right']); });\n  key('up', function () { ship.power(GameView.MOVES['up']); });\n  key('down', function () { ship.power(GameView.MOVES['down']); });\n  // Object.keys(GameView.MOVES).forEach(function (k) {\n  //   var move = GameView.MOVES[k];\n  //   key(k, function () { ship.power(move); });\n  // });\n\n  key(\"space\", function() { ship.fireBullet() } );\n\n};\n\nmodule.exports = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/gameView.js\n ** module id = 12\n ** module chunks = 0\n **/"],"sourceRoot":""}